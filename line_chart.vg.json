{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1200,
  "height": 400,
  "autosize": { "type": "fit", "contains": "padding" },
  "title": {
    "text": "Relationship between Marriages and Births",
    "fontSize": 20,
    "color": "#2c3e50"
  },
  "config": {
    "title": {
      "font": "Times New Roman",
      "fontSize": 14
    },
    "axis": {
      "labelFont": "Calibri",
      "titleFont": "Times New Roman"
    }
  },
  "data": {
    "url": "Cleaned_Data/birth_state - Cleaned.csv",
    "format": { "type": "csv" }
  },
  "params": [
    {
      "name": "State_selection",
      "value": "Johor",
      "bind": {
        "input": "select",
        "options": [
          "Johor",
          "Kedah",
          "Kelantan",
          "Melaka",
          "Negeri Sembilan",
          "Pahang",
          "Perak",
          "Perlis",
          "Pulau Pinang",
          "Sabah",
          "Sarawak",
          "Selangor",
          "Terengganu"
        ],
        "labels": [
          "Johor",
          "Kedah",
          "Kelantan",
          "Melaka",
          "Negeri Sembilan",
          "Pahang",
          "Perak",
          "Perlis",
          "Pulau Pinang",
          "Sabah",
          "Sarawak",
          "Selangor",
          "Terengganu"
        ],
        "name": "State: "
      }
    }
  ],
  "transform": [
    {
      "filter": "datum.state == State_selection"
    }
  ],
  "layer": [
    {
      "mark": {
        "type": "line",
        "point": {
          "shape": "circle",
          "color": "#970f008f",
          "size": 100
        },
        "color": "#E74C3C",
        "strokeWidth": 3
      },
      "encoding": {
        "x": {
          "field": "year",
          "type": "ordinal",
          "title": "Year",
          "axis": { "labelAngle": 0 }
        },
        "y": {
          "field": "marriage_rate_per_1000_population",
          "type": "quantitative",
          "title": "Marriage Rate and Birth Rate by 1000 population",
          "scale": { "domain": [0, 25] }
        },
        "tooltip": [
          { "field": "year", "title": "Year" },
          {
            "field": "marriage_rate_per_1000_population",
            "title": "Marriage Rate"
          }
        ]
      }
    },
    {
      "mark": {
        "type": "line",
        "point": { "shape": "square", "color": "#006bb2ae", "size": 100 },
        "color": "#3498DB",
        "strokeWidth": 3
      },
      "encoding": {
        "x": { "field": "year", "type": "ordinal" },
        "y": {
          "field": "birth_rate_per_1000_population",
          "type": "quantitative"
        },
        "tooltip": [
          { "field": "year", "title": "Year" },
          { "field": "birth_rate_per_1000_population", "title": "Birth Rate" }
        ]
      }
    },

    {
      "mark": {
        "type": "text",
        "align": "left",
        "dx": 10,
        "dy": -10,
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "#E74C3C"
      },
      "transform": [{ "filter": "datum.year == 2022" }],
      "encoding": {
        "x": { "field": "year", "type": "ordinal" },
        "y": {
          "field": "marriage_rate_per_1000_population",
          "type": "quantitative"
        },
        "text": { "value": "Marriage Rate" }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "dx": 10,
        "dy": 10,
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "#3498DB"
      },
      "transform": [{ "filter": "datum.year == 2022" }],
      "encoding": {
        "x": { "field": "year", "type": "ordinal" },
        "y": {
          "field": "birth_rate_per_1000_population",
          "type": "quantitative"
        },
        "text": { "value": "Birth Rate" }
      }
    }
  ]
}
